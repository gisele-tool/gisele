task Complete

  trackvar everyOneHappy
    {FirstTask:start}

  fluent someoneHappy
    {DrinkBeer:start, DrinkBeers:start},
    {DoNothingSpecial:end}
  initially false

  task DrinkBeers
    while not(drunk)
      DrinkBeer
    end
  end

  refinement
    FirstTask
    if everyoneHappy
      par
        MakeJoy
        DrinkBeers
      end
    elsif someoneHappy
      DrinkBeer
    else
      DoNothingSpecial
    end
    while not(endOfTheDay)
      WaitAndSee
    end
  end
end